<md-dialog id="change-profile-data" aria-label="Change Profile Data" ng-cloak>
    <form name="ctrl.changeProfileForm">
        <md-dialog-content class="md-dialog-content ely-dialog-content">
            <div class="md-title ely-dialog-title">Profile ändern</div>
            <md-input-container class="ely-input-container">
                <label>Vorname</label>
                <input name="forename" ng-model="ctrl.userDataToChange.forename" required ng-disabled="ctrl.running" ng-change="ctrl.change()"/>
                <div ng-messages="ctrl.changeProfileForm.forename.$error" ng-show="ctrl.changeProfileForm.forename.$dirty">
                    <div ng-message="required">Wird benötigt!</div>
                </div>
            </md-input-container>
            <md-input-container class="ely-input-container">
                <label>Nachname</label>
                <input name="surname" ng-model="ctrl.userDataToChange.surname" required ng-disabled="ctrl.running"
                       ng-change="ctrl.change()"/>
                <div ng-messages="ctrl.changeProfileForm.surname.$error" ng-show="ctrl.changeProfileForm.surname.$dirty">
                    <div ng-message="required">Wird benötigt!</div>
                </div>
            </md-input-container>
            <md-input-container class="ely-input-container">
                <label>Geburtstag</label>
                <input name="birthday" ng-model="ctrl.userDataToChange.birthday" required ng-disabled="ctrl.running"
                       ng-change="ctrl.change()"/>
                <div ng-messages="ctrl.changeProfileForm.birthday.$error" ng-show="ctrl.changeProfileForm.birthday.$dirty">
                    <div ng-message="required">Wird benötigt!</div>
                    <div ng-message="birthday-format">Ungültiges Datum (z.B {{ctrl.getDateExample()}})</div>
                </div>
            </md-input-container>
            <md-input-container class="ely-input-container">
                <label>Strasse (optional)</label>
                <input name="street" ng-model="ctrl.userDataToChange.street" ng-disabled="ctrl.running" ng-change="ctrl.change()"/>
            </md-input-container>
            <md-input-container class="ely-input-container">
                <label>Ort (optional)</label>
                <input name="place" ng-model="ctrl.userDataToChange.place" ng-disabled="ctrl.running" ng-change="ctrl.change()"/>
            </md-input-container>
            <md-input-container class="ely-input-container">
                <label>Land</label>
                <md-select ng-model="ctrl.userDataToChange.selectedCountryCode" ng-model-options="{trackBy: '$value.code'}" ng-change="ctrl.change()">
                    <md-option ng-repeat="countryCode in ctrl.countryCodes" ng-value="countryCode">
                        {{countryCode.country}}
                    </md-option>
                </md-select>
            </md-input-container>
            <md-radio-group ng-model="ctrl.userDataToChange.female" layout="row" class="select-gender" ng-change="ctrl.change()">
                <md-radio-button value="false">Mann</md-radio-button>
                <md-radio-button value="true"> Frau</md-radio-button>
            </md-radio-group>
        </md-dialog-content>
        <md-dialog-actions>
            <md-button ng-click="ctrl.cancel()">Abbrechen</md-button>
            <md-button class="md-primary" ng-click="ctrl.upload()"
                       ng-disabled="ctrl.running || !ctrl.uploadValid || ctrl.changeProfileForm.$invalid">
                Ändern
            </md-button>
        </md-dialog-actions>
    </form>
    <md-progress-linear ng-if="ctrl.running" md-mode="indeterminate"></md-progress-linear>
</md-dialog>