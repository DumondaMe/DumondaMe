<md-dialog id="password-reset-dialog" aria-label="Reset Password" layout="column">
    <form name="ctrl.resetPasswordForm" ng-cloak ng-if="!ctrl.showPasswordReset">
        <div class="md-title ely-dialog-title">Passwort zurücksetzten</div>
        <md-dialog-content>
            <div class="md-dialog-content ely-dialog-content" layout="column" ng-if="!ctrl.success">
                <md-input-container class="ely-input-container">
                    <label>Neues Passwort</label>
                    <input name="newPassword" class="blog-input" ng-model="ctrl.newPassword" required type="password"
                           ng-disabled="ctrl.running" ng-change="ctrl.newPasswordChanged()"/>
                    <div ng-messages="ctrl.resetPasswordForm.newPassword.$error" ng-show="ctrl.resetPasswordForm.newPassword.$dirty">
                        <div ng-message="required">Wird benötigt!</div>
                        <div ng-message="ely-min-length">Das Passwort muss mindestens 8 Zeichen lang sein</div>
                        <div ng-message="ely-char-missing">Das Passwort muss mindestens ein Grossbuchstaben und eine Zahl enthalten</div>
                    </div>
                </md-input-container>
                <md-input-container class="ely-input-container">
                    <label>Neues Passwort bestätigen</label>
                    <input name="confirmNewPassword" class="blog-input" ng-model="ctrl.confirmNewPassword" required type="password"
                           ng-disabled="ctrl.running" ng-change="ctrl.confirmNewPasswordChanged()"/>
                    <div ng-messages="ctrl.resetPasswordForm.confirmNewPassword.$error"
                         ng-show="ctrl.resetPasswordForm.confirmNewPassword.$dirty">
                        <div ng-message="required">Wird benötigt!</div>
                        <div ng-message="ely-compare">Die Passwörter stimmen nicht überein</div>
                    </div>
                </md-input-container>
                <div class="error-message" ng-if="ctrl.error">
                    Passwort konnte nicht geändert werden. Möglicherweise ist der Link ungültig.
                </div>
            </div>
            <div class="md-dialog-content ely-dialog-content" ng-if="ctrl.success">
                <div class="success-message">Passwort erfolgreich geändert</div>
            </div>
        </md-dialog-content>
        <md-dialog-actions>
            <md-button ng-click="ctrl.cancel()" ng-hide="ctrl.success">Abbrechen</md-button>
            <md-button id="reset" class="md-primary md-raised" type="submit" ng-click="ctrl.sendResetPassword()"
                       ng-disabled="ctrl.resetPasswordForm.$invalid || ctrl.running" ng-hide="ctrl.success || ctrl.error">
                Zurücksetzten
            </md-button>
            <md-button ng-click="ctrl.close()" ng-show="ctrl.success">Ok</md-button>
        </md-dialog-actions>
    </form>
    <ely-password-reset-request back="ctrl.showPasswordReset" ng-if="ctrl.showPasswordReset"></ely-password-reset-request>
    <span flex></span>
    <md-progress-linear ng-if="ctrl.running" md-mode="indeterminate"></md-progress-linear>
</md-dialog>
