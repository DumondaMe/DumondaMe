<md-dialog id="manage-event" aria-label="Manage Events" class="manage-page">
    <form name="ctrl.manageEventForm" ng-cloak>
        <div class="md-title ely-dialog-title" ng-if="!ctrl.isEditMode">Veranstaltung erstellen</div>
        <div class="md-title ely-dialog-title" ng-if="ctrl.isEditMode">Veranstaltung <span class="highlighted">{{ctrl.data.title}}</span> bearbeiten
        </div>
        <md-dialog-content>
            <div class="md-dialog-content ely-dialog-content">
                <md-input-container class="input-container" flex ng-if="!ctrl.isEditMode">
                    <label>Titel</label>
                    <input name="title" ng-model="ctrl.data.title" required md-maxlength="120" ng-disabled="ctrl.uploadStarted"/>
                    <div ng-messages="ctrl.manageEventForm.title.$error">
                        <div ng-message="required">Wird benötigt!</div>
                        <div ng-message="md-maxlength">Text ist zu lang</div>
                    </div>
                </md-input-container>
                <md-input-container class="input-container">
                    <label>Beschreibung</label>
                    <textarea name="description" ng-model="ctrl.data.description" required md-maxlength="1000"
                              ng-disabled="ctrl.uploadStarted" ng-change="ctrl.changeData()"></textarea>
                    <div ng-messages="ctrl.manageEventForm.description.$error">
                        <div ng-message="required">Wird benötigt!</div>
                        <div ng-message="md-maxlength">Text ist zu lang</div>
                    </div>
                </md-input-container>
                <div layout="row" class="ely-date-time-picker">
                    <div>
                        <md-datepicker ng-model="ctrl.data.startDate" ng-changed="ctrl.dateChanged()"
                                       md-min-date="ctrl.minDate"></md-datepicker>
                    </div>
                    <md-input-container class="input-container ely-input-time-container">
                        <md-icon md-svg-icon="cardActions:clock" class="clock-icon"></md-icon>
                        <input name="startTime" ng-model="ctrl.data.startTime" required ng-disabled="ctrl.uploadStarted" aria-label="start time"
                               ng-pattern="/^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/" class="ely-input-time"/>
                        <div ng-messages="ctrl.manageEventForm.startTime.$error">
                            <div ng-message="pattern">HH:mm</div>
                        </div>
                    </md-input-container>
                </div>
            </div>
        </md-dialog-content>
        <md-dialog-actions>
            <md-button ng-click="ctrl.cancel()">Abbrechen</md-button>
            <md-button class="md-primary md-raised" ng-click="ctrl.createEvent()" ng-if="!ctrl.isEditMode"
                       ng-disabled=" ctrl.uploadStarted || ctrl.manageEventForm.$invalid">Erstellen
            </md-button>
            <md-button class="md-primary md-raised" ng-click="ctrl.modifyEvent()" ng-if="ctrl.isEditMode"
                       ng-disabled=" ctrl.uploadStarted || ctrl.manageEventForm.$invalid || !ctrl.dataHasChanged">
                Ändern
            </md-button>
        </md-dialog-actions>
    </form>
    <md-progress-linear ng-if="ctrl.uploadStarted && !ctrl.selectImage" md-mode="indeterminate"></md-progress-linear>
</md-dialog>